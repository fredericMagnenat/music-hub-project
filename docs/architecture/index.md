# Music Hub Fullstack Architecture Document

## Table of Contents

- [Music Hub Fullstack Architecture Document](#table-of-contents)
  - [Introduction](./introduction.md)
    - [Starter Template or Existing Project](./introduction.md#starter-template-or-existing-project)
    - [Change Log](./introduction.md#change-log)
  - [High-Level Architecture](./high-level-architecture.md)
    - [Technical Summary](./high-level-architecture.md#technical-summary)
    - [Platform and Infrastructure Choice](./high-level-architecture.md#platform-and-infrastructure-choice)
    - [High-Level Architecture Diagram](./high-level-architecture.md#high-level-architecture-diagram)
  - [Tech Stack](./tech-stack.md)
  - [Data Models](./data-models.md)
    - ["Producer"](./data-models.md#producer)
    - ["Track" & Dependencies](./data-models.md#track-dependencies)
    - ["Artist"](./data-models.md#artist)
  - [API Specification](./api-specification.md)
  - [Testing Strategy](./testing-strategy.md)
  - [Resilience and Observability](./resilience-and-observability.md)
    - [Observability](./resilience-and-observability.md#observability)
    - [Resilience](./resilience-and-observability.md#resilience)
  - [Logging Best Practices](./logging-best-practices.md)
    - [Logging Strategy & Philosophy](./logging-best-practices.md#logging-strategy-philosophy)
    - [Quarkus Logging Framework](./logging-best-practices.md#quarkus-logging-framework)
    - [Log Levels & Usage Guidelines](./logging-best-practices.md#log-levels-usage-guidelines)
    - [Structured Logging with JSON](./logging-best-practices.md#structured-logging-with-json)
    - [Contextual Logging & Correlation](./logging-best-practices.md#contextual-logging-correlation)
    - [Hexagonal Architecture Logging Patterns](./logging-best-practices.md#hexagonal-architecture-logging-patterns)
    - [Security & Sensitive Data](./logging-best-practices.md#security-sensitive-data)
    - [Environment-Specific Configuration](./logging-best-practices.md#environment-specific-configuration)
    - [OpenTelemetry Integration](./logging-best-practices.md#opentelemetry-integration)
    - [Performance Considerations](./logging-best-practices.md#performance-considerations)
    - [Business Event Logging](./logging-best-practices.md#business-event-logging)
    - [Monitoring & Alerting](./logging-best-practices.md#monitoring-alerting)
  - [Source Tree](./source-tree.md)
    - [Monorepo Root Structure](./source-tree.md#monorepo-root-structure)
    - [Backend Modules Structure ()](./source-tree.md#backend-modules-structure)
    - [Frontend Testing Layout](./source-tree.md#frontend-testing-layout)
  - [Testing Best Practices](./testing-best-practices.md)
    - [Table of Contents](./testing-best-practices.md#table-of-contents)
    - [Testing Philosophy & Principles](./testing-best-practices.md#testing-philosophy-principles)
      - [Testing Strategy Overview](./testing-best-practices.md#testing-strategy-overview)
      - [Core Testing Principles](./testing-best-practices.md#core-testing-principles)
      - [Hexagonal Architecture Testing Approach](./testing-best-practices.md#hexagonal-architecture-testing-approach)
    - [Backend Testing Standards](./testing-best-practices.md#backend-testing-standards)
      - [Domain Layer Testing](./testing-best-practices.md#domain-layer-testing)
        - [✅ Excellent Example from Our Codebase](./testing-best-practices.md#excellent-example-from-our-codebase)
        - [Domain Testing Standards](./testing-best-practices.md#domain-testing-standards)
        - [Maven Configuration for Domain Tests](./testing-best-practices.md#maven-configuration-for-domain-tests)
      - [Application Layer Testing](./testing-best-practices.md#application-layer-testing)
        - [✅ Excellent Example from Our Codebase](./testing-best-practices.md#excellent-example-from-our-codebase)
        - [Application Testing Standards](./testing-best-practices.md#application-testing-standards)
      - [Adapter Testing (Unit Level)](./testing-best-practices.md#adapter-testing-unit-level)
        - [REST Adapter Testing Standards](./testing-best-practices.md#rest-adapter-testing-standards)
        - [Persistence Adapter Testing Standards](./testing-best-practices.md#persistence-adapter-testing-standards)
      - [Bootstrap Integration Testing](./testing-best-practices.md#bootstrap-integration-testing)
        - [✅ Excellent Example from Our Codebase](./testing-best-practices.md#excellent-example-from-our-codebase)
      - [Bootstrap Integration Standards](./testing-best-practices.md#bootstrap-integration-standards)
      - [Quarkus Test Configuration](./testing-best-practices.md#quarkus-test-configuration)
    - [Frontend Testing Standards](./testing-best-practices.md#frontend-testing-standards)
      - [Vitest Configuration](./testing-best-practices.md#vitest-configuration)
      - [Current Configuration](./testing-best-practices.md#current-configuration)
      - [Component Testing Standards](./testing-best-practices.md#component-testing-standards)
        - [✅ Excellent Example from Our Codebase](./testing-best-practices.md#excellent-example-from-our-codebase)
      - [Frontend Testing Standards](./testing-best-practices.md#frontend-testing-standards)
      - [API Mocking Strategy](./testing-best-practices.md#api-mocking-strategy)
      - [Package.json Scripts](./testing-best-practices.md#packagejson-scripts)
    - [AI Agent Guidelines](./testing-best-practices.md#ai-agent-guidelines)
      - [Test Creation Rules for AI Agents](./testing-best-practices.md#test-creation-rules-for-ai-agents)
        - [CRITICAL RULES - ALWAYS FOLLOW](./testing-best-practices.md#critical-rules-always-follow)
      - [AI Test Generation Patterns](./testing-best-practices.md#ai-test-generation-patterns)
      - [Test Naming Conventions for AI](./testing-best-practices.md#test-naming-conventions-for-ai)
        - [Method Naming Pattern:](./testing-best-practices.md#method-naming-pattern)
      - [Common AI Mistakes to Avoid](./testing-best-practices.md#common-ai-mistakes-to-avoid)
      - [❌ DON'T Mock Value Objects](./testing-best-practices.md#dont-mock-value-objects)
      - [❌ DON'T Test Implementation Details](./testing-best-practices.md#dont-test-implementation-details)
        - [❌ DON'T Use Overly Complex Mocking](./testing-best-practices.md#dont-use-overly-complex-mocking)
    - [Templates & Boilerplates](./testing-best-practices.md#templates-boilerplates)
      - [Domain Entity Test Template](./testing-best-practices.md#domain-entity-test-template)
      - [Application Service Test Template](./testing-best-practices.md#application-service-test-template)
      - [REST Adapter Test Template](./testing-best-practices.md#rest-adapter-test-template)
      - [Integration Test Template (Bootstrap)](./testing-best-practices.md#integration-test-template-bootstrap)
      - [Frontend Component Test Template](./testing-best-practices.md#frontend-component-test-template)
    - [Performance Standards & Metrics](./testing-best-practices.md#performance-standards-metrics)
      - [Test Execution Time Targets](./testing-best-practices.md#test-execution-time-targets)
        - [Time Limits by Test Type](./testing-best-practices.md#time-limits-by-test-type)
      - [Performance Monitoring](./testing-best-practices.md#performance-monitoring)
      - [Test Coverage Standards](./testing-best-practices.md#test-coverage-standards)
        - [Coverage Targets by Layer](./testing-best-practices.md#coverage-targets-by-layer)
        - [JaCoCo Configuration](./testing-best-practices.md#jacoco-configuration)
      - [Database Performance for Tests](./testing-best-practices.md#database-performance-for-tests)
        - [Test Database Strategy](./testing-best-practices.md#test-database-strategy)
        - [H2 vs PostgreSQL for Tests](./testing-best-practices.md#h2-vs-postgresql-for-tests)
      - [CI/CD Performance Optimization](./testing-best-practices.md#cicd-performance-optimization)
        - [Parallel Test Execution](./testing-best-practices.md#parallel-test-execution)
      - [Frontend Test Performance](./testing-best-practices.md#frontend-test-performance)
    - [Common Anti-patterns to Avoid](./testing-best-practices.md#common-anti-patterns-to-avoid)
      - [Backend Anti-patterns](./testing-best-practices.md#backend-anti-patterns)
        - [❌ DON'T Mock Value Objects](./testing-best-practices.md#dont-mock-value-objects)
      - [❌ DON'T Test Implementation Details](./testing-best-practices.md#dont-test-implementation-details)
      - [❌ DON'T Mock Everything in Integration Tests](./testing-best-practices.md#dont-mock-everything-in-integration-tests)
      - [❌ DON'T Ignore Test Data Setup](./testing-best-practices.md#dont-ignore-test-data-setup)
      - [❌ DON'T Use Generic Exception Testing](./testing-best-practices.md#dont-use-generic-exception-testing)
      - [Frontend Anti-patterns](./testing-best-practices.md#frontend-anti-patterns)
        - [❌ DON'T Test Implementation Details](./testing-best-practices.md#dont-test-implementation-details)
        - [❌ DON'T Over-Mock in Component Tests](./testing-best-practices.md#dont-over-mock-in-component-tests)
        - [❌ DON'T Use findBy* for Immediate Elements](./testing-best-practices.md#dont-use-findby-for-immediate-elements)
      - [General Testing Anti-patterns](./testing-best-practices.md#general-testing-anti-patterns)
        - [❌ DON'T Write Flaky Tests](./testing-best-practices.md#dont-write-flaky-tests)
        - [❌ DON'T Create Test Dependencies](./testing-best-practices.md#dont-create-test-dependencies)
        - [❌ DON'T Ignore Test Maintenance](./testing-best-practices.md#dont-ignore-test-maintenance)
    - [Conclusion](./testing-best-practices.md#conclusion)
    - [Key Takeaways:](./testing-best-practices.md#key-takeaways)
    - [Quick Reference:](./testing-best-practices.md#quick-reference)
  - [Detailed Frontend Structure](./detailed-frontend-structure.md)
    - [Directory Structure](./detailed-frontend-structure.md#directory-structure)
    - [11.2. Component Philosophy](./detailed-frontend-structure.md#112-component-philosophy)
    - [11.3. API Integration](./detailed-frontend-structure.md#113-api-integration)
    - [11.4. State Management](./detailed-frontend-structure.md#114-state-management)
    - [11.5. Testing Strategy](./detailed-frontend-structure.md#115-testing-strategy)
  - [Database Migration with Flyway](./database-migration-with-flyway.md)
    - [Table of Contents](./database-migration-with-flyway.md#table-of-contents)
    - [Database Migration Strategy](./database-migration-with-flyway.md#database-migration-strategy)
      - [Philosophy](./database-migration-with-flyway.md#philosophy)
      - [Key Principles](./database-migration-with-flyway.md#key-principles)
      - [Integration with Hibernate](./database-migration-with-flyway.md#integration-with-hibernate)
    - [Flyway Multi-Module Architecture](./database-migration-with-flyway.md#flyway-multi-module-architecture)
      - [Project Structure](./database-migration-with-flyway.md#project-structure)
      - [Flyway Configuration Architecture](./database-migration-with-flyway.md#flyway-configuration-architecture)
      - [Why This Architecture?](./database-migration-with-flyway.md#why-this-architecture)
    - [Versioning Conventions](./database-migration-with-flyway.md#versioning-conventions)
      - [Global Version Space](./database-migration-with-flyway.md#global-version-space)
      - [Version Range Allocation](./database-migration-with-flyway.md#version-range-allocation)
      - [Version Numbering Rules](./database-migration-with-flyway.md#version-numbering-rules)
      - [Migration Naming Convention](./database-migration-with-flyway.md#migration-naming-convention)
    - [Migration Development Workflow](./database-migration-with-flyway.md#migration-development-workflow)
      - [Current Challenge](./database-migration-with-flyway.md#current-challenge)
      - [Recommended Development Setup](./database-migration-with-flyway.md#recommended-development-setup)
      - [Schema Export Configuration](./database-migration-with-flyway.md#schema-export-configuration)
      - [Development Profiles for Schema Generation](./database-migration-with-flyway.md#development-profiles-for-schema-generation)
      - [3. Migration Generation Script](./database-migration-with-flyway.md#3-migration-generation-script)
      - [Step-by-Step Development Workflow](./database-migration-with-flyway.md#step-by-step-development-workflow)
        - [Step 1: Modify Your JPA Entity](./database-migration-with-flyway.md#step-1-modify-your-jpa-entity)
      - [Step 2: Generate Migration Template](./database-migration-with-flyway.md#step-2-generate-migration-template)
      - [Step 3: Edit the Generated Migration](./database-migration-with-flyway.md#step-3-edit-the-generated-migration)
      - [Step 4: Test the Migration](./database-migration-with-flyway.md#step-4-test-the-migration)
      - [Step 5: Verify and Commit](./database-migration-with-flyway.md#step-5-verify-and-commit)
      - [Alternative: Quick Schema Generation](./database-migration-with-flyway.md#alternative-quick-schema-generation)
    - [Bounded Context Integration](./database-migration-with-flyway.md#bounded-context-integration)
      - [Schema Organization Strategy](./database-migration-with-flyway.md#schema-organization-strategy)
        - [Producer Context Schema](./database-migration-with-flyway.md#producer-context-schema)
        - [Artist Context Schema](./database-migration-with-flyway.md#artist-context-schema)
      - [Cross-Context Data Integrity](./database-migration-with-flyway.md#cross-context-data-integrity)
        - [Shared Value Objects](./database-migration-with-flyway.md#shared-value-objects)
        - [Event-Driven Data Consistency](./database-migration-with-flyway.md#event-driven-data-consistency)
      - [Migration Coordination](./database-migration-with-flyway.md#migration-coordination)
        - [Shared Schema Elements](./database-migration-with-flyway.md#shared-schema-elements)
        - [Cross-Context Migration Dependencies](./database-migration-with-flyway.md#cross-context-migration-dependencies)
    - [Environment-Specific Configuration](./database-migration-with-flyway.md#environment-specific-configuration)
      - [Development Environment](./database-migration-with-flyway.md#development-environment)
      - [Test Environment](./database-migration-with-flyway.md#test-environment)
      - [Production Environment](./database-migration-with-flyway.md#production-environment)
      - [Docker Compose for Development](./database-migration-with-flyway.md#docker-compose-for-development)
      - [Migration Validation Script](./database-migration-with-flyway.md#migration-validation-script)
    - [Best Practices & Anti-patterns](./database-migration-with-flyway.md#best-practices-anti-patterns)
      - [Migration Best Practices](./database-migration-with-flyway.md#migration-best-practices)
        - [✅ DO: Write Idempotent Migrations](./database-migration-with-flyway.md#do-write-idempotent-migrations)
        - [✅ DO: Include Rollback Information](./database-migration-with-flyway.md#do-include-rollback-information)
        - [✅ DO: Use Transactions Appropriately](./database-migration-with-flyway.md#do-use-transactions-appropriately)
        - [✅ DO: Document Migration Purpose](./database-migration-with-flyway.md#do-document-migration-purpose)
        - [✅ DO: Handle Large Data Migrations Carefully](./database-migration-with-flyway.md#do-handle-large-data-migrations-carefully)
      - [Anti-patterns to Avoid](./database-migration-with-flyway.md#anti-patterns-to-avoid)
        - [❌ DON'T: Make Breaking Changes Without Migration Path](./database-migration-with-flyway.md#dont-make-breaking-changes-without-migration-path)
        - [❌ DON'T: Modify Existing Migrations](./database-migration-with-flyway.md#dont-modify-existing-migrations)
        - [❌ DON'T: Use Database-Specific Features Without Consideration](./database-migration-with-flyway.md#dont-use-database-specific-features-without-consideration)
        - [❌ DON'T: Mix DDL and DML Without Careful Planning](./database-migration-with-flyway.md#dont-mix-ddl-and-dml-without-careful-planning)
        - [❌ DON'T: Ignore Migration Performance](./database-migration-with-flyway.md#dont-ignore-migration-performance)
      - [Migration Templates](./database-migration-with-flyway.md#migration-templates)
        - [Template: Add Column](./database-migration-with-flyway.md#template-add-column)
        - [Template: Create Table](./database-migration-with-flyway.md#template-create-table)
        - [Template: Data Migration](./database-migration-with-flyway.md#template-data-migration)
    - [Troubleshooting & Recovery](./database-migration-with-flyway.md#troubleshooting-recovery)
      - [Common Issues and Solutions](./database-migration-with-flyway.md#common-issues-and-solutions)
        - [Issue: Migration Checksum Mismatch](./database-migration-with-flyway.md#issue-migration-checksum-mismatch)
      - [Issue: Migration Failed Mid-Execution](./database-migration-with-flyway.md#issue-migration-failed-mid-execution)
        - [Issue: Out-of-Order Migrations](./database-migration-with-flyway.md#issue-out-of-order-migrations)
        - [Issue: Version Range Conflicts](./database-migration-with-flyway.md#issue-version-range-conflicts)
      - [Recovery Procedures](./database-migration-with-flyway.md#recovery-procedures)
        - [Recovery: Corrupted Migration State](./database-migration-with-flyway.md#recovery-corrupted-migration-state)
        - [Recovery: Production Migration Failure](./database-migration-with-flyway.md#recovery-production-migration-failure)
      - [Monitoring and Alerting](./database-migration-with-flyway.md#monitoring-and-alerting)
        - [Health Check for Migration Status](./database-migration-with-flyway.md#health-check-for-migration-status)
      - [CI/CD Migration Validation](./database-migration-with-flyway.md#cicd-migration-validation)
    - [Conclusion](./database-migration-with-flyway.md#conclusion)
      - [Key Takeaways:](./database-migration-with-flyway.md#key-takeaways)
    - [Quick Reference:](./database-migration-with-flyway.md#quick-reference)
    - [Modern Tooling (Quarkus 3.x / Hibernate 6+):](./database-migration-with-flyway.md#modern-tooling-quarkus-3x-hibernate-6)
  - [Coding Standards](./coding-standards.md)
    - [Commit Message Format](./coding-standards.md#commit-message-format)
    - [Critical Full-stack Rules](./coding-standards.md#critical-full-stack-rules)
  - [Maven Multi-Module Best Practices](./maven-multi-module-best-practices.md)
